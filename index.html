<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>standard prompter</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Updated Favicon Link -->
    <link rel="icon" href="logo.svg" type="image/svg+xml">
    <link rel="alternate icon" href="icon-192.png" type="image/png" sizes="192x192">
    <link rel="apple-touch-icon" href="icon-512.png">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
        }
        h1 {
            font-family: 'Poppins', sans-serif;
        }
        /* Custom scrollbar for light and dark modes */
        ::-webkit-scrollbar { width: 8px; }
        html.dark ::-webkit-scrollbar-track { background: #1f2937; } /* gray-800 */
        html.dark ::-webkit-scrollbar-thumb { background: #4b5563; border-radius: 4px; } /* gray-600 */
        html.dark ::-webkit-scrollbar-thumb:hover { background: #6b7280; } /* gray-500 */

        html:not(.dark) ::-webkit-scrollbar-track { background: #f3f4f6; } /* gray-100 */
        html:not(.dark) ::-webkit-scrollbar-thumb { background: #9ca3af; border-radius: 4px; } /* gray-400 */
        html:not(.dark) ::-webkit-scrollbar-thumb:hover { background: #6b7280; } /* gray-500 */

        .generator-section { display: none; }
        .generator-section.active { display: block; }

        .tab-btn {
            transition: all 0.2s ease-in-out;
            padding: 0.5rem 0.75rem;
            border-bottom: 2px solid transparent;
        }
        .tab-btn.active {
            font-weight: 600;
        }
        .checkbox-label {
            display: flex;
            align-items: center;
            cursor: pointer;
        }
        .checkbox-label input {
            margin-right: 0.5rem;
        }
         /* Custom focus ring colors */
        .form-input:focus, textarea:focus {
            border-color: var(--focus-color);
            box-shadow: 0 0 0 2px var(--focus-color);
            outline: none;
        }
        .form-checkbox:checked {
            background-color: var(--focus-color);
            border-color: var(--focus-color);
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white antialiased relative">
    
    <!-- Theme Toggle Button -->
    <div class="absolute top-4 right-4">
        <button id="theme-toggle" type="button" class="text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2.5">
            <svg id="theme-toggle-dark-icon" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg>
            <svg id="theme-toggle-light-icon" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.707.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 100 2h1z" fill-rule="evenodd" clip-rule="evenodd"></path></svg>
        </button>
    </div>

    <div class="container mx-auto max-w-5xl p-4 sm:p-6 lg:p-8">
        
        <header class="mb-6 text-center">
            <h1 class="text-4xl font-bold text-gray-900 dark:text-white lowercase">standard prompter</h1>
            <p class="text-gray-500 dark:text-gray-400 mt-2">enter the relevant information to create a standardized prompt.</p>
        </header>

        <!-- Tabs for navigation -->
        <div class="mb-6 border-b border-gray-200 dark:border-gray-700">
            <nav id="nav-container" class="flex flex-wrap -mb-px space-x-2" aria-label="Tabs">
                <!-- Tabs will be populated by JS -->
            </nav>
        </div>

        <!-- Main Content Area -->
        <main id="main-container">
            <!-- All generator sections will be populated by JS -->
        </main>

        <!-- Output Section -->
        <div id="output-container" class="mt-8 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 hidden">
            <div class="flex flex-wrap justify-between items-center mb-4 border-b border-gray-200 dark:border-gray-700 pb-3 gap-2">
                <h3 id="output-title" class="text-xl font-semibold">Generated Prompt</h3>
                <div class="flex items-center space-x-2">
                    <button id="copy-btn" class="bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-800 dark:text-white font-bold py-2 px-4 rounded-md shadow-sm transition-colors text-sm">Copy</button>
                    <button id="save-btn" class="bg-[#0097b2] hover:bg-[#007a8f] text-white font-bold py-2 px-4 rounded-md shadow-sm transition-colors text-sm">Save as .txt</button>
                </div>
            </div>
            <pre class="bg-gray-100 dark:bg-gray-900 rounded-md p-4 whitespace-pre-wrap text-gray-800 dark:text-gray-300 text-sm overflow-x-auto"><code id="output-prompt"></code></pre>
            <div id="copy-feedback" class="text-green-500 dark:text-green-400 text-sm mt-2 h-4"></div>
        </div>
        
        <!-- Datalists for suggestions -->
        <div id="datalist-container"></div>

        <footer class="text-center mt-12">
            <p class="text-xs text-gray-500 dark:text-gray-500" style="font-family: 'Poppins', sans-serif;">developed 2025 by public policy lab</p>
        </footer>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- THEME TOGGLE LOGIC ---
            const themeToggleBtn = document.getElementById('theme-toggle');
            const themeToggleDarkIcon = document.getElementById('theme-toggle-dark-icon');
            const themeToggleLightIcon = document.getElementById('theme-toggle-light-icon');

            // Set initial theme based on localStorage or system preference
            if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                themeToggleLightIcon.classList.remove('hidden');
                document.documentElement.classList.add('dark');
            } else {
                themeToggleDarkIcon.classList.remove('hidden');
                document.documentElement.classList.remove('dark');
            }

            themeToggleBtn.addEventListener('click', function() {
                // Toggle icons
                themeToggleDarkIcon.classList.toggle('hidden');
                themeToggleLightIcon.classList.toggle('hidden');

                // Toggle theme and save to localStorage
                if (localStorage.getItem('color-theme')) {
                    if (localStorage.getItem('color-theme') === 'light') {
                        document.documentElement.classList.add('dark');
                        localStorage.setItem('color-theme', 'dark');
                    } else {
                        document.documentElement.classList.remove('dark');
                        localStorage.setItem('color-theme', 'light');
                    }
                } else {
                    if (document.documentElement.classList.contains('dark')) {
                        document.documentElement.classList.remove('dark');
                        localStorage.setItem('color-theme', 'light');
                    } else {
                        document.documentElement.classList.add('dark');
                        localStorage.setItem('color-theme', 'dark');
                    }
                }
            });

            // --- BRAND & UI DATA ---
            const brandColors = {
                teal: '#46bbb7',
                green: '#3fad87',
                blue: '#0097b2',
                coral: '#f05b4e',
                pink: '#ec9896',
            };

            const generatorsData = [
                { id: 'video', name: 'Video Script', color: brandColors.teal, fields: [
                    { id: 'topic', label: 'Video Topic', type: 'textarea', placeholder: "Describe the video's subject, or refer to an attached file." },
                    { id: 'duration', label: 'Video Duration (minutes)', type: 'number', placeholder: 'e.g., 8' },
                    { id: 'audience', label: 'Target Audience', type: 'text', placeholder: "e.g., 'General audience'", suggestions: 'audience' },
                    { id: 'style', label: 'Style & Tone', type: 'text', placeholder: "e.g., 'Investigative and wondrous'", suggestions: 'videoStyle' },
                    { id: 'analogies', label: 'Core Analogies (Optional)', type: 'text', placeholder: "e.g., 'Use the analogy of urban cholesterol for parking.'" },
                    { id: 'stock', label: 'Stock Footage Library (Optional)', type: 'text', placeholder: "e.g., 'C:/Users/Me/Stock' or a Google Drive link." }
                ]},
                { id: 'report', name: 'Report', color: brandColors.blue, fields: [
                    { id: 'topic', label: 'Primary Topic & Thesis', type: 'textarea', placeholder: "Describe the report's subject and its central argument." },
                    { id: 'sources', label: 'Key Data & Source Materials', type: 'textarea', placeholder: "Refer to attached files by name. e.g., 'See attached: study.pdf'" },
                    { id: 'objective', label: 'Report Objective', type: 'text', placeholder: "e.g., 'To persuade policymakers to adopt new regulations.'" },
                    { id: 'analogies', label: 'Core Analogies (Optional)', type: 'text', placeholder: "e.g., 'Use the analogy of urban cholesterol for parking.'" }
                ]},
                { id: 'research', name: 'Research Paper', color: brandColors.pink, fields: [
                    { id: 'title', label: 'Title of Paper', type: 'text', placeholder: "Enter the full title of the research paper." },
                    { id: 'authors', label: 'Authors and Affiliations', type: 'textarea', placeholder: "List authors and affiliations, one per line." },
                    { id: 'sources', label: 'Primary Source Materials', type: 'textarea', placeholder: "Refer to attached files by name. e.g., 'See attached: M&E_Framework.xlsx'" },
                    { id: 'analogies', label: 'Core Analogies (Optional)', type: 'text', placeholder: "e.g., 'Use the analogy of balls on a sheet for gravity.'" }
                ]},
                { id: 'substack', name: 'Substack', color: brandColors.coral, fields: [
                    { id: 'angle', label: 'Core Topic/Angle', type: 'text', placeholder: "The main topic or angle of the blog post." },
                    { id: 'thesis', label: 'Core Argument/Thesis', type: 'textarea', placeholder: "State the central, provocative argument." },
                    { id: 'data', label: 'Key Data Points to Reference', type: 'textarea', placeholder: "List key stats or chart ideas." },
                    { id: 'sources', label: 'Source Materials', type: 'text', placeholder: "e.g., 'Draw from Street_Parking_Report.pdf'" },
                    { id: 'analogies', label: 'Core Analogies (Optional)', type: 'text', placeholder: "e.g., 'Use the concrete blocks analogy for housing.'" }
                ]},
                { id: 'press', name: 'Press Release', color: brandColors.green, fields: [
                    { id: 'headline', label: 'Headline', type: 'text', placeholder: "Enter the exact, full headline for the press release." },
                    { id: 'sources', label: 'Source Materials', type: 'text', placeholder: "e.g., 'Based on findings in Report.pdf'" }
                ]},
                { id: 'tiktok', name: 'TikTok Video', color: brandColors.teal, fields: [
                    { id: 'topic', label: 'Video Topic', type: 'text', placeholder: "e.g., '41% of Malé's streets block ambulances.'" },
                    { id: 'sources', label: 'Source Materials', type: 'text', placeholder: "e.g., 'Use data from Street_Parking_Report.pdf.'" },
                    { id: 'style', label: 'Style', type: 'text', placeholder: "e.g., 'Fast-paced, high-energy, quick cuts.'" }
                ]},
                { id: 'infographic', name: 'Infographic', color: brandColors.blue, fields: [
                    { id: 'topic', label: 'Infographic Topic', type: 'text', placeholder: "e.g., 'Visualizing the loss of public space to street parking.'" },
                    { id: 'data', label: 'Key Data Points', type: 'textarea', placeholder: "List 3-5 key stats to visualize." },
                    { id: 'sources', label: 'Source Materials', type: 'text', placeholder: "e.g., 'Use data from Report.pdf'"},
                    { id: 'aspect', label: 'Target Aspect Ratio', type: 'text', placeholder: "e.g., 'Instagram Post (1:1)', 'A4 Poster'", suggestions: 'aspectRatio' },
                    { id: 'style', label: 'Desired Visual Style', type: 'text', placeholder: "e.g., 'Minimalist with a single accent color'", suggestions: 'infographicStyle' },
                    { id: 'tools', label: 'Tool-Specific Instructions', type: 'checkbox', options: ['Canva Pro', 'Easel.ly'] }
                ]},
                { id: 'charts', name: 'Charts/Viz', color: brandColors.pink, fields: [
                    { id: 'data', label: 'Data to Visualize', type: 'textarea', placeholder: "Describe or paste the data, or refer to an attached file." },
                    { id: 'goal', label: 'Primary Goal / Story to Tell', type: 'text', placeholder: "e.g., 'Emphasize the improvement in accessibility.'" },
                    { id: 'tools', label: 'Output Tools', type: 'checkbox', options: ['Datawrapper', 'Flourish', 'ggplot2 (in R)', 'Tableau'] }
                ]},
                { id: 'dashboard', name: 'Dashboard', color: brandColors.coral, fields: [
                    { id: 'data', label: 'Data Description', type: 'textarea', placeholder: "Describe the dataset(s) or refer to attached files." },
                    { id: 'objective', label: 'Primary Objective', type: 'text', placeholder: "e.g., 'To monitor workplan progress for senior management.'" },
                    { id: 'audience', label: 'Target Audience', type: 'text', placeholder: "e.g., 'Minister, Department Heads'", suggestions: 'audience' }
                ]},
                { id: 'methods', name: 'Research Methods', color: brandColors.green, fields: [
                    { id: 'question', label: 'Research Question', type: 'text', placeholder: "State the precise causal question." },
                    { id: 'data', label: 'Available Data', type: 'textarea', placeholder: "Describe the dataset(s) or refer to attached files." }
                ]},
                { id: 'briefing', name: 'Briefing Note', color: brandColors.teal, fields: [
                    { id: 'topic', label: 'Briefing Subject', type: 'text', placeholder: "e.g., 'Briefing on the key findings of the Third Spaces report.'" },
                    { id: 'audience', label: 'Target Audience', type: 'text', placeholder: "e.g., 'Minister of Social and Family Development'", suggestions: 'audience' },
                    { id: 'sources', label: 'Source Materials', type: 'text', placeholder: "e.g., 'Draw all info from Third_Spaces_Draft.pdf'" }
                ]},
                { id: 'narrative', name: 'Narrative Framing', color: brandColors.blue, fields: [
                     { id: 'policy', label: 'Policy Idea & Detailed Explanation', type: 'textarea', placeholder: "Explain the policy's goals, mechanisms, and intended impact." },
                     { id: 'goal', label: 'Primary Goal of Engagement', type: 'text', placeholder: "e.g., 'To secure funding in the next state budget.'" },
                     { id: 'stakeholders', label: 'Known Stakeholders to Include', type: 'text', placeholder: "e.g., 'Ministry of Education, UNICEF'" },
                     { id: 'sources', label: 'Source Materials', type: 'text', placeholder: "e.g., 'Base arguments on Report.pdf'"}
                ]},
                { id: 'advocacy', name: 'Advocacy Plan', color: brandColors.pink, fields: [
                    { id: 'problem', label: 'Main Problem', type: 'textarea', placeholder: "Describe the broad problem the advocacy will address." },
                    { id: 'issue', label: 'Specific Advocacy Issue (Root Cause)', type: 'textarea', placeholder: "Describe the specific, actionable root cause of the problem." },
                    { id: 'sources', label: 'Source Materials', type: 'text', placeholder: "Refer to any attached files containing evidence, data, or context." }
                ]},
                { id: 'council_paper', name: 'Cabinet/Council Paper', color: brandColors.coral, fields: [
                    { id: 'title', label: 'Case Title', type: 'text', placeholder: 'Enter the official case title.' },
                    { id: 'sources', label: 'Source Materials', type: 'textarea', placeholder: 'List the file names of all relevant reports, data, or documents the AI should use to write this paper. e.g., "Draft_Report_v3.pdf", "Financial_Analysis.xlsx", "Stakeholder_Meeting_Minutes.docx"' },
                    { id: 'preferred_outcome', label: 'Most Preferred Outcome', type: 'textarea', placeholder: '(For framing purposes). Describe the specific option or outcome you want the council to choose.' },
                    { id: 'narrative_emphasis', label: 'Narrative to Emphasize', type: 'textarea', placeholder: '(For framing purposes). What core narrative arguments should be woven into the paper to guide the reader?' },
                    { id: 'solutions_to_propose', label: 'Solutions to Analyze from Sources', type: 'textarea', placeholder: 'List the specific solutions or options you want the AI to analyze and present based on the source materials.' }
                ]},
                { id: 'treaty_report', name: 'Treaty Report', color: brandColors.green, fields: [
                    { id: 'convention', label: 'Convention Name', type: 'text', placeholder: 'Specify the Convention, e.g., CRPD, CEDAW, CRC' },
                    { id: 'sources', label: 'Source Materials', type: 'textarea', placeholder: 'List all relevant source file names here. For example: "National Disability Policy 2023.pdf", "Statistics Bureau Annual Report 2024.xlsx", "CSO Consultation Meeting Minutes.docx"' }
                ]},
                { id: 'deep_research', name: 'DeepResearch', color: brandColors.blue, fields: [
                    { id: 'objective_details', label: 'Research Objective (what it needs to cover)', type: 'textarea', placeholder: 'e.g., ...the history of gender equality policymaking in the Maldives from 2008 to the present day.' },
                    { id: 'country', label: 'Country Focus', type: 'text', placeholder: 'Defaults to Maldives if left blank' }
                ]}
            ];
            
            const suggestions = {
                audience: ['General audience', 'Policymakers', 'Ministry leadership', 'Students', 'Industry experts'],
                videoStyle: ['Investigative (like Vox)', 'Fast-paced explainer (like Kurzgesagt)', 'Personal narrative (like Johnny Harris)', 'Humorous & technical (like Mark Rober)'],
                infographicStyle: ['Minimalist with one accent color', 'Data-heavy and corporate', 'Playful and illustrative', 'Dark mode with neon highlights', 'Swiss design / International Typographic Style', 'Retro / Vintage'],
                aspectRatio: ['Instagram Post (1:1)', 'Instagram Story (9:16)', 'A4 Poster (Vertical)', 'A3 Poster (Vertical)', 'Twitter Post (16:9)', 'Facebook Post (1.91:1)']
            };

            const templates = {
                 video: p => `You are an expert YouTube video producer and scriptwriter. Your task is to generate a complete, scene-by-scene video production plan for a video based on the information I provide.

**1. Core Video Details**
* **Video Topic:** ${p.topic}
* **Video Duration:** Approximately ${p.duration} minutes.
* **Target Audience:** ${p.audience}
* **Desired Style & Tone:** The style should be ${p.style}.
* **Core Analogies:** ${p.analogies || 'None specified.'}
* **Available Stock Footage:** ${p.stock || 'None specified. Suggest generic stock footage.'}

**2. Mandatory Writing and Style Guide**
* **Tone and Clarity:** The writing must be clear, direct, and accessible to a 12th-grade reading level. Avoid filler words like "tapestry," "symphony," or "delve." Do not use constructions like "it's not about X, it's about Y." Use technical language precisely where necessary but ensure the overall narrative is easy to follow.

**3. Required Output Structure**
Please structure your response as a chronological, scene-by-scene breakdown. For each timed segment, provide the following six elements:

* **Timestamp:** The start and end time for the scene (e.g., \`0:00 - 0:15\`).
* **Visual Description:** A detailed description of what should be on screen. If relevant footage exists in the provided library, suggest it by name.
* **Audio (Music & SFX):** Describe the mood and style of the background music and suggest key sound effects.
* **On-Screen Text / Graphics:** Specify any text, titles, or diagrams that should appear.
* **CapCut Implementation:** Provide clear, actionable instructions on how to create the specified visuals using CapCut features.
* **Narration (VO):** Write the complete voiceover script for this segment, adhering to the style guide.`,
                report: p => `You are an expert policy analyst and report writer. Your writing style is modeled on publications that are clear, direct, and persuasive, aiming for a 12th-grade reading level. You communicate complex ideas without resorting to filler language or jargon, and you use technical terms precisely when necessary.

**1. Core Report Details**

* **Primary Topic & Thesis:** ${p.topic}
* **Key Data & Source Materials:** ${p.sources}
* **Report Objective:** ${p.objective}
* **Core Analogies (Optional but Recommended):** ${p.analogies || 'None specified.'}

**2. Mandatory Writing and Style Guide**

* **Tone and Clarity:** The tone must be professional, direct, and objective. The language must be clear and accessible. Avoid passive voice. Do not use meaningless filler words or phrases like "tapestry," "symphony," "delve," "labyrinth," or constructions like "it's not about X, it's about Y."
* **Structure and Formatting:** The report must be clearly organized with a logical flow. All headings and subheadings must be in **sentence case**, not title case.
* **Factual Integrity:** Every claim or assertion must be directly supported by the provided source materials. **You must not invent or hallucinate any facts, statistics, or sources.** If information is missing, state that it is unavailable.
* **Citations:** All sources must be cited in-text and listed in a final "References" section using **APA 7th Edition format**. For online sources, the reference must end with a direct, clickable URL enclosed in < >. Example: \`Author, A. A. (Year). *Title of work*. Source. <https://...>\`
* **Use of Analogies:** Use the provided analogies sparingly and purposefully. They should only be used to (a) clarify a complex technical concept or (b) reframe an issue to make a persuasive point more effectively. Do not use them as rhetorical flourishes.

**3. Required Report Structure**

Generate the report using the following section-by-section blueprint:

* **Executive summary:** A brief, one-paragraph overview of the report's purpose, key findings, and main recommendations.
* **1. Introduction**
* **2. Background / Methodology**
* **3. Analysis / Key findings**
* **4. Discussion / Arguments for change**
* **5. Policy recommendations**
* **6. Conclusion**
* **7. References**`,
                research: p => `You are an expert academic writer and policy researcher. Your task is to write a formal research paper that is meticulously structured, evidence-based, and written in a clear, direct, and objective style suitable for publication.

**1. Core Paper Details**

* **Title of Paper:** ${p.title}
* **Authors and Affiliations:** ${p.authors}
* **Primary Source Materials:** ${p.sources}
* **Core Analogies (Optional):** ${p.analogies || 'None specified.'}

**2. Mandatory Writing and Style Guide**

* **Keywords:** Based on the provided materials, generate 5-7 relevant keywords for the paper.
* **Tone and Clarity:** The writing must be clear, direct, and accessible to a 12th-grade reading level. Avoid filler words like "tapestry," "symphony," or "delve." Do not use constructions like "it's not about X, it's about Y." Use technical language precisely where necessary but ensure the overall narrative is easy to follow.
* **Factual Integrity:** Every claim must be directly supported by the provided source materials. **Do not invent or hallucinate any facts, statistics, or sources.**
* **Citations:** All sources must be cited in-text and listed in a final "References" section using **APA 7th Edition format**. For online sources, the reference must end with a direct URL enclosed in < >.

**3. Required Paper Structure**

Generate the research paper using the following section-by-section blueprint. The paper must begin with a header (e.g., \`PAPER NO. [DEPT/YEAR/ID]\`) and follow this exact structure:

* **Abstract**
* **1. Introduction**
* **2. Background**
* **3. Literature review and desk research**
* **4. Goals of the project / Research objectives**
* **5. Process and methodology**
* **6. Technical tools and developments (if applicable)**
* **7. Results and discussion**
* **8. Mistakes and lessons learned**
* **9. New institutional knowledge and recommendations**
* **10. Next steps**
* **11. Conclusion**
* **12. References**
* **Appendices (if applicable)**`,
                substack: p => `You are an expert blogger and economic commentator, writing in the style of Noah Smith, Matt Yglesias, or Santi Ruiz. Your writing should be analytical, data-driven, and conversational, with a clear and often opinionated thesis.

**1. Post Details**

* **Core Topic/Angle:** ${p.angle}
* **Core Argument/Thesis:** ${p.thesis}
* **Key Data Points/Charts to Reference:** ${p.data}
* **Source Materials:** ${p.sources}
* **Core Analogies (Optional):** ${p.analogies || 'None specified.'}

**2. Mandatory Writing and Style Guide**

* **Title:** Generate 3-5 catchy, blog-style titles based on the core topic/angle.
* **Tone:** Smart, informal, and direct. Use first-person ("I think...") where appropriate. Ask rhetorical questions to engage the reader.
* **Structure:**
    1.  Start with a clear opening paragraph that states the post's main thesis.
    2.  Develop the argument using the provided data points. Explain charts and numbers simply.
    3.  Link to external ideas, studies, or articles to support the argument (you can suggest these links).
    4.  Use subheadings to break up the text and guide the reader.
    5.  Conclude with a summary of the argument and a final "So what?" takeaway for the reader.
* **Language:** Keep sentences and paragraphs relatively short. Avoid academic jargon.

Please now generate the full Substack post based on these instructions.`,
                press: p => `You are an expert public relations professional. Your task is to write a formal press release based on the provided information. The press release must be written in the style of a concise, factual news article.

**1. Press Release Details**

* **Headline:** ${p.headline}
* **Source Materials:** ${p.sources}

**2. Mandatory Structure and Content**

The press release must follow this exact structure and contain the specified boilerplate text.

* **PRESS RELEASE** (Must be at the top)
* **Headline:** (Use the exact headline provided above)
* **Dateline:** MALÉ, MALDIVES – ${new Date().toLocaleDateString('en-CA')} –
* **Body Paragraphs:**
    * Write 3-5 body paragraphs summarizing the key findings from the source materials.
    * The style must be that of a news article: clear, direct, and factual.
    * Each paragraph should be short, containing only 2-4 sentences for maximum readability.
    * The first paragraph must summarize the most important finding (the "lede").
    * Subsequent paragraphs should provide supporting details, statistics, and key quotes (you can create a quote attributed to a spokesperson).
* **Project Summary Paragraph:** (This paragraph must be included as written below, adapted with the project's details)
    * "The research, titled '[Insert Report Title]', provides a comprehensive analysis of [briefly describe the project's purpose]. The study highlights the urgent need for policy changes to address [state the core problem] and improve urban livability for all residents."
* **Boilerplate Paragraph:** (This paragraph must be included verbatim)
    * "**About Public Policy Lab:** Public Policy Lab is a think tank and consultancy firm based in the Maldives focused on developing the policy environment through original research, targeted projects, and training. Follow our work on Instagram, TikTok, and X (formerly Twitter) at @policylabmv."
* **###** (The press release must end with three hash marks centered on a new line)

Please now generate the complete press release.`,
                tiktok: p => `You are an expert TikTok video producer specializing in creating viral educational content. Your task is to generate a complete, shot-by-shot plan for a TikTok video based on the provided information.

**1. Video Details**

* **Topic:** ${p.topic}
* **Source Materials:** ${p.sources}
* **Style:** ${p.style}

**2. Mandatory TikTok Format**

The plan must follow a structure optimized for TikTok's algorithm and user experience.

* **Hook (0-2 seconds):** Start with the most shocking or surprising fact to stop the scroll.
* **Body (2-15 seconds):** Quickly provide 2-3 supporting points with fast-paced visuals.
* **Payoff/Conclusion (15-20 seconds):** End with a clear, memorable takeaway or call to action.

**3. Required Output Structure**

Generate the plan as a markdown table with two columns: "Timestamp" and "Shot Details". The "Shot Details" column must be a comprehensive, multi-line description covering all of the following for each timestamp:
* **Visuals:** Description of the clip (stock footage, b-roll, or graphics) in a 9:16 aspect ratio.
* **On-Screen Text:** The exact text overlay and style notes.
* **TTS Voiceover Script:** The script for TikTok's text-to-speech voice.
* **Editing Notes:** Specific CapCut effects, transitions, and audio suggestions.`,
                infographic: p => `You are an expert information designer. Your task is to generate a detailed plan for a single, cohesive infographic based on the provided topic and data.

**1. Infographic Details**

* **Topic:** ${p.topic}
* **Key Data Points:** ${p.data}
* **Source Materials:** ${p.sources}
* **Target Platform & Aspect Ratio:** ${p.aspect}
* **Desired Visual Style:** ${p.style}
* **Tool-Specific Instructions:** ${p.tools}

**2. Mandatory Visual and Design Guide**
* **Color Palette:** The design must be heavily influenced by the Public Policy Lab brand colors: Teal (#46bbb7), Coral Red (#f05b4e), Green (#3fad87), Blue (#0097b2), and Pink (#ec9896). Use these as the core palette.

**3. Required Output Structure**

Provide a single, detailed concept with the following sections:

* **Concept Title:** (e.g., "The Squeeze: How Our City is Losing Space")
* **Core Analogy/Metaphor:** (e.g., "A shrinking road")
* **Layout and Flow:** Describe the structure from top to bottom, explaining how the reader's eye should travel through the information.
* **Visual Elements:** Detail the specific icons, charts, and illustrations to use for each data point.
* **Text Content:** Write the exact text for the main title, section headers, labels, and descriptions.
* **Tool-Specific Instructions:**
    * **For Canva Pro:** Suggest specific templates, font pairings (e.g., "League Spartan" for headers), and elements from the Canva library.
    * **For Easel.ly:** Suggest relevant templates and objects from the Easel.ly library.`,
                charts: p => `You are an expert data visualization specialist. Your task is to analyze the provided data and goal, discuss potential chart options, and then provide a detailed recommendation and creation plan. Your analysis must be based on the principles outlined below.

**1. Chart Details**

* **Data to Visualize:** ${p.data}
* **Primary Goal / Story to Tell:** ${p.goal}
* **Output Tools:** ${p.tools}

**2. Mandatory Design Guide**
* **Color Palette:** The chart's color scheme should be based on the Public Policy Lab brand palette: Teal (#46bbb7), Coral Red (#f05b4e), Green (#3fad87), Blue (#0097b2), and Pink (#ec9896).

**3. Mandatory Chart Selection Principles**

You must choose the most appropriate chart type based on the primary data relationship. Adhere strictly to the following rules:

* **Change over Time:** Use a **Line Chart** for continuous data, an **Area Chart** for volume, or a **Step Chart** for sudden changes.
* **Part-to-Whole:** Use a **Stacked Bar/Column Chart**, **Stacked Area Chart**, or a **Treemap** for hierarchical data. Use a **Pie/Donut Chart** only for simple compositions with very few categories.
* **Magnitude/Ranking (Comparison):** Use a **Column Chart** (vertical) or **Bar Chart** (horizontal). Use a **Grouped Bar/Column Chart** to compare sub-categories.
* **Distribution:** Use a **Histogram** for frequency in bins, a **Box Plot** for ranges, or a **Scatter Plot** to show clusters and outliers.
* **Correlation:** Use a **Scatter Plot** for two variables or a **Bubble Chart** for three.
* **Deviation:** Use a **Diverging Bar Chart** to show positive/negative values from a baseline.
* **Flow:** Use a **Waterfall Chart** to show how a value changes sequentially or a **Sankey Diagram** for flow between multiple states.
* **Spatial:** Use a **Thematic/GIS Map** for regional data or a **Bubble Map** for point-based magnitude.

**4. Required Output Structure**

* **1. Discussion of Chart Options:**
    * First, briefly discuss all viable chart types for the user's data and goal, without using specific examples in this instruction text.
    * For each option, explain the narrative it would emphasize.
    * Note if a combination of charts would be most effective to tell the full story.
* **2. Final Recommendation and Design:**
    * State your final recommended chart or combination of charts.
    * **Chart Type:** (e.g., "Grouped Bar Chart")
    * **Rationale:** Justify your final choice, explaining why it best serves the primary goal.
    * **Design:** Suggest a clear title, axis labels, and legends.
* **3. Creation Instructions:**
    * Provide clear, step-by-step instructions for creating the recommended chart(s) in **each of the selected tools**.
    * Include instructions on any necessary **data cleaning or pre-processing** steps.
    * **For ggplot2:** Provide the complete, runnable R code. **The code must be heavily commented**, explaining each function and argument for a user who does not know R.`,
                dashboard: p => `You are an expert data analyst and dashboard designer, specializing in Tableau. Your task is to design a detailed plan for a powerful and user-friendly dashboard based on the provided data and objectives.

**1. Dashboard Details**

* **Data Description:** ${p.data}
* **Primary Objective:** ${p.objective}
* **Target Audience:** ${p.audience}

**2. Mandatory Design Guide**
* **Color Palette:** The dashboard's color scheme should be based on the Public Policy Lab brand palette: Teal (#46bbb7), Coral Red (#f05b4e), Green (#3fad87), Blue (#0097b2), and Pink (#ec9896). Use these colors for charts, highlights, and key metrics.

**3. Required Output Structure**

Generate the dashboard plan with the following detailed sections:

* **1. Data Pre-processing:**
    * Recommend any necessary cleaning, transposing, or data joining steps required before importing into Tableau.
    * List any required **Calculated Fields** and provide the Tableau formula for each (e.g., \`Name: 'Days Overdue'\`, \`Formula: IF [Status] != 'Completed' AND [Target Date] < TODAY() THEN ZN(DATEDIFF('day', [Target Date], TODAY())) END\`).
* **2. Dashboard Layout:**
    * Describe the overall layout (e.g., "A 2x2 grid").
    * Specify the placement of each chart and filter.
* **3. Key Visualizations (Worksheets):**
    * For each chart on the dashboard, describe its **Type** (e.g., "KPI Big Numbers," "Gantt Chart," "Bar Chart"), its **Purpose**, and the **Dimensions and Measures** to be used.
* **4. Interactivity and Filters:**
    * List all recommended filters (e.g., "Filter by Department," "Filter by Status," "Date Range Slider for Target Date").
    * Describe the filter type (e.g., "Multi-select dropdown," "Single-select list").
    * Specify which worksheets each filter should apply to.
* **5. PowerBI Adaptation:**
    * Briefly describe how to create a similar dashboard in PowerBI, noting any key differences in approach or available visuals.`,
                methods: p => `You are an expert econometrician and research methodologist. Your thinking is deeply informed by the principles of causal inference as detailed in Scott Cunningham's "Causal Inference: The Mixtape" and Nick Huntington-Klein's "The Effect." Your task is to propose a rigorous research methodology to answer the user's question based on their available data.

**1. Research Details**

* **Research Question:** ${p.question}
* **Available Data:** ${p.data}

**2. Required Output Structure**

Generate a detailed research plan with the following sections:

* **1. Causal Framework:**
    * Draw a **Directed Acyclic Graph (DAG)** as a code block or text description to map the causal relationships between the treatment, outcome, and potential confounders.
    * Identify the key causal question and the core identification challenge (e.g., "The challenge is selection bias, as the program was likely implemented in higher-crime neighborhoods.").
* **2. Recommended Research Design:**
    * Propose the most appropriate research design. Justify your choice.
    * Examples: **Difference-in-Differences (DiD)**, **Regression Discontinuity (RD)**, **Instrumental Variables (IV)**, or a **Randomized Control Trial (RCT)**.
* **3. Statistical Model:**
    * Specify the primary regression equation to be estimated.
    * Define each variable in the equation (Y, T, X).
    * Recommend the specific regression type (e.g., "Linear OLS with clustered standard errors," "Logit model").
    * Provide the complete R code to run the analysis. **The code must be heavily commented**, explaining each function and argument for a user who does not know R. Include data cleaning and preparation steps.
* **4. Robustness Checks and Diagnostics:**
    * List essential tests to validate the model's assumptions (e.g., "Test for parallel trends in the pre-treatment period for DiD," "Check for balance in covariates").
    * Suggest alternative specifications or models to test the sensitivity of the results.
* **5. Potential Pitfalls, Limitations, and Alternative Explanations:**
    * **a. Statistical Limitations:** Discuss potential threats to statistical validity (e.g., "Spillover effects," "Measurement error," "Heteroskedasticity") and suggest ways to mitigate them.
    * **b. Logical and Contextual Considerations:** Discuss non-statistical alternative explanations for the findings. This should include potential selection biases, the representativeness of the sample, confounding events (e.g., a major economic crisis, a natural disaster, a new law passed during the study period), seasonality (e.g., tourist seasons, holidays), reporting bias (e.g., changes in social stigma affecting reporting rates), and the Lucas critique (i.e., whether the findings would hold if the policy were scaled up). Consider the use of dummy variables to control for specific, niche events (e.g., a dummy for the COVID-19 pandemic years, or for a specific month of a state of emergency).
    * **c. Checklist for Contextual Inquiry:** Generate a list of pointed questions the researcher must consider about the specific context, since you do not have that local knowledge. For example: "Were there any other major programs or events happening in the 'treated' group but not the 'control' group during the study period?", "How might the upcoming election cycle have influenced the behavior you are measuring?", "Could the observed change be due to a shift in how data is collected or defined, rather than a change in underlying behavior?".`,
                 briefing: p => `You are an expert policy advisor. Your task is to write a clear, concise, and scannable briefing note on the provided topic, summarizing the key information from the source materials.

**1. Briefing Note Details**

* **Topic:** ${p.topic}
* **Target Audience:** ${p.audience}
* **Source Materials:** ${p.sources}

**2. Mandatory Format and Style**

* **Length:** The entire output must be structured to fit on a single page (approximately 400-500 words).
* **Clarity:** Use clear, direct language. Avoid jargon.
* **Structure:** Rely on bullet points for easy scanning. The length of each section should be flexible based on the topic's needs.

**3. Required Output Structure**

Generate the briefing note using this exact format:

**BRIEFING NOTE FOR:** ${p.audience}

**SUBJECT:** ${p.topic}

**DATE:** ${new Date().toLocaleDateString('en-CA')}

**Purpose:**
* A single sentence stating the purpose of this briefing note.

**Background (if necessary):**
* A brief, 2-3 sentence paragraph providing essential context, only if absolutely necessary for understanding the issue.

**Key Points:**
* Use bullet points to summarize the most critical facts, statistics, and findings from the source materials.

**Implications:**
* Use bullet points to explain the meaning and consequences of the key points. What problems or opportunities do they highlight?

**Way Forward:**
* Use bullet points to list actionable recommendations, decisions to be made, or next steps to be taken.`,
                narrative: p => `You are an expert public policy strategist and lobbying consultant. Your task is to generate a comprehensive narrative framing and stakeholder engagement plan for a given policy idea. You must be strategic, persuasive, and meticulous, drawing on real-world information to tailor your recommendations.

**1. Core Policy Details**

* **Policy Idea & Detailed Explanation:** ${p.policy}
* **Primary Goal of Engagement:** ${p.goal}
* **Known Stakeholders to Include:** ${p.stakeholders}
* **Source Materials:** ${p.sources}

**2. Mandatory Style Guide**

* **Tone and Clarity:** The writing must be clear, direct, and accessible to a 12th-grade reading level. Avoid filler words like "tapestry," "symphony," or "delve." Do not use constructions like "it's not about X, it's about Y." Use technical language precisely where necessary.
* **Factual Integrity:** When searching for information, prioritize official websites, recent reports, and reputable news sources. All research findings must be cited in APA 7th Edition format, with a direct URL in < >. Do not hallucinate facts, projects, or publications.

**3. Required Output Structure**

Generate the narrative framing document using the following comprehensive, multi-part structure:

### 1. Potential Key Narratives/Framing
* **Instruction:** Develop 2-3 high-level, persuasive core narratives to frame the policy for a general audience. Each narrative should be engaging, positive, and highlight the broad benefits in a compelling way that makes the policy seem like an obviously good idea.

### 2. CICO analysis (Conflicts of Interest, Competition, Opposition)
* **Instruction:** Analyze potential roadblocks based on the CICO framework.
* **Conflicts of Interest:**
    * **Organizational:** Identify potential conflicts between institutions (e.g., political opposition between a city council and the central government, upcoming elections causing delays).
    * **Individual:** Consider potential rivalries or misaligned incentives between individuals within stakeholder organizations (e.g., competing executives, individuals whose authority might be diminished by the policy).
* **Competition:**
    * Identify entities that may not be direct legal competitors but could see the policy as a threat to their status quo (e.g., a private cinema opposing a free community film club).
* **Opposition:**
    * Identify groups that might oppose the policy on logistical, ideological, or social grounds (e.g., residents concerned about noise from a new community space, religious groups concerned about social mingling, criminal elements threatened by community improvement).

### 3. Stakeholder identification and analysis
* **Instruction:** Identify all relevant stakeholders using the provided reference list and supplementing with web searches. Note that the list is a reference and other stakeholders can be included.

**Reference List of Potential Stakeholders in the Maldives:**

* **Government Councils:**
    * **The Social Council:** Chaired by the Vice President. Includes: Ministry of Education; Ministry of Health; Ministry of Islamic Affairs; Ministry of Social and Family Development; Ministry of Sports, Fitness and Recreation; Ministry of Dhivehi Language, Culture and Heritage; Ministry of Higher Education, Labour and Skills Development; Ministry of Youth Empowerment, Information and Arts; Ministry of Cities, Local Government and Public Works; Ministry of Homeland Security and Technology.
    * **The Economic Council:** Chaired by the President. Includes: Ministry of Defence; Ministry of Finance and Planning; Ministry of Homeland Security and Technology; Ministry of Economic Development and Trade; Ministry of Fisheries and Ocean Resources; Ministry of Tourism and Environment; Ministry of Transport and Civil Aviation; Ministry of Construction, Housing and Infrastructure; Ministry of Agriculture and Animal Welfare; Ministry of Cities, Local Government and Public Works.
    * **The Cabinet:** Includes all Ministers, the Vice President, and the President.
* **International & Aid Organizations:** UNDP, UNICEF, WHO, UNFPA, World Bank, Asian Development Bank (ADB), IMF, IsDB, UNODC, IOM, UNESCO, AusAid, USAID, British High Commission, Australian High Commission, Japanese Government, Chinese Government, Transparency International, Westminster Foundation for Democracy (WFD), International Republican Institute (IRI), Merck Foundation.
* **Local NGOs & Foundations:** Society for Health Education (SHE), Maldives Association for People with Disabilities (MAPD), Advocating the Rights of Children (ARC), Maldives Red Crescent, Regional Alliance for Fostering Youth (RAFY), Retirees Association of Maldives, Association for Disability and Development (ADD), Beautiful Eyes Down Syndrome Association of Maldives, Blind and Visually Impaired Association of Maldives (BVISM), Care Society, Maldives Autism Association, Maldives Deaf Association, Mental Health Support Group (MHSG).
* **Corporate & SOE CSR Providers:** Housing Development Corporation (HDC), MTCC, MWSC, STELCO, WAMCO, Bank of Maldives (BML), Dhiraagu, Ooredoo, Maldives Pension Administration Office, Atmosphere Foundation.

**For each Key Stakeholder (e.g., Ministry of Education, UNICEF, etc.):**

* **a. Specific Mandates and Focus Areas:**
    * *Instruction:* Search online for the organization's official mandate, strategic plan, recent press releases, and stated goals.
    * Present the findings in a table.
* **b. Narrative Framing and Persuasive Angles:**
    * *Instruction:* Based on the mandates and general sector knowledge, analyze the likely policy interests and personal passions of individuals within the organization.
    * Present the analysis in a table.

### 4. Tailored messaging and persuasion tools
* **a. Impactful Analogies**
* **b. Memorable Messaging**

### 5. Demonstrating synergy and expertise
* **a. Connecting to Existing Work**
* **b. Referencing Niche Information**

### 6. Appealing to stakeholder interests
* **a. Personal and Political Wins**
* **b. PR and Risk Management**

### 7. Risk, cost, and general preparedness
* **a. Cost-Benefit Analysis**
* **b. Strategic Analyses (SWOT, PEST, Risk Register)**
* **c. Frequently Asked Questions (FAQs)**

### 8. Incentives and adaptations for buy-in

### 9. FOR RIGOROUS ANALYSIS PURPOSES - POTENTIAL ISSUES:
* **Instruction:** Critically analyze the policy idea from an oppositional standpoint. Identify potential negative consequences, unintended side effects, implementation challenges, or valid counterarguments that could weaken the proposal.`,
                advocacy: p => `You are an expert advocacy strategist. Your task is to generate a comprehensive, actionable advocacy plan based on the provided information, following the 10-part strategic framework.

**1. Advocacy Details**

* **Main Problem:** ${p.problem}
* **Specific Advocacy Issue (Root Cause):** ${p.issue}
* **Source Materials:** ${p.sources}

**2. Mandatory Style Guide**

* **Tone and Clarity:** The writing must be clear, direct, and strategic. Use bullet points and tables for readability.
* **Factual Integrity:** All claims should be grounded in the provided source materials.

**3. Required Output Structure**

Generate the advocacy plan using the following 10-part structure:

### Part 1: Advocacy Issue
* A brief summary of the main problem and the specific, actionable advocacy issue derived from it.

### Part 2: Advocacy Goal and Objectives
* **Advocacy Goal:** State the single, overarching policy change you want to achieve. It must be a SMART goal (Specific, Measurable, Achievable, Relevant, Time-bound) and follow the format:
    * **WHO** (Decision-making institution) will **HOW** (Specific action/policy vehicle) to ensure **WHAT** (The desired change) by **WHEN** (The deadline).
* **Advocacy Objectives:** List 2-3 intermediate, measurable steps that must be achieved to reach the main goal. These are actions you want decision-makers or influencers to take.

### Part 3: Decision-Makers and Influencers
* **Decision-Makers:** List the specific individuals or bodies with the formal power to approve your advocacy goal.
* **Key Influencers:** List the key individuals or groups who can influence the decision-makers (e.g., professional associations, civic leaders, media, academics).

### Part 4: Decision-Makers' Key Interests
* Create a table analyzing up to three key decision-makers:
| Decision-Maker | Awareness of Issue | Current Position | Key Interests (e.g., political, financial, personal) |
| :--- | :--- | :--- | :--- |
| [Name/Title] | [Unaware / Aware but uninformed / Accurately informed] | [High support / Low support / Non-mobilized / High opposition] | [List 2-3 key interests] |

### Part 5: Opposition and Obstacles
* **Opponents:** Identify potential individuals or groups who might oppose the goal and list their reasons and level of influence.
* **Obstacles:** Identify potential non-personnel challenges (e.g., lack of funding, upcoming elections, bureaucratic hurdles).
* **Mitigation Strategies:** For each key opponent or obstacle, suggest a strategy to mitigate their impact.

### Part 6: Advocacy Assets and Gaps
* Create a table inventorying your organization's resources for this campaign:
| Asset/Skill Category | Specific Asset (if any) | Level (High/Medium/Low) |
| :--- | :--- | :--- |
| Staff availability | | |
| Funding | | |
| Relationships with decision-makers | | |
| Media relationships | | |
| Technical expertise on the issue | | |
| Supporting data/evidence | | |

### Part 7: Advocacy Partners
* Identify 2-4 potential partner organizations or coalitions. For each, describe the strategic reason for partnering (e.g., "They fill our gap in media relations") and their anticipated role.

### Part 8: Advocacy Tactics (Work Plan)
* For **each objective** listed in Part 2, create a detailed work plan in a table format:
| Activity/Tactic | Responsible Person/Org | Partner(s) | Resources Needed | Timeline |
| :--- | :--- | :--- | :--- | :--- |
| (e.g., "Hold briefing with MOH officials") | (e.g., "Jane Doe") | (e.g., "Partner NGO") | (e.g., "Policy brief, meeting room") | (e.g., "Q4 2025") |

### Part 9: Advocacy Messages
* For one key decision-maker, craft a concise and compelling core message (5-8 sentences) that answers these four questions:
    1.  What is the issue?
    2.  Why should this specific decision-maker care (linking to their interests from Part 4)?
    3.  What is your proposed solution?
    4.  What is the specific action you want them to take next?

### Part 10: Plan to Measure Success
* For each objective, list the key metrics for success, separating them into:
    * **Outputs:** The direct products of your activities (e.g., "Number of meetings held," "Fact sheets distributed").
    * **Outcomes:** The changes that result from your activities (e.g., "Decision-maker issues a public statement of support," "Increased positive media mentions of the issue").`,
                council_paper: p => `You are an expert policy analyst and strategist. Your primary task is to read, analyze, and synthesize the information from the user-provided source materials to write a formal, persuasive Cabinet or Council Paper from scratch.

**1. Core Task & Source Materials**

* **Source Materials to Analyze:** ${p.sources}
* **Solutions to Analyze from Sources:** ${p.solutions_to_propose}

**2. Strategic Framing Instructions**

* **Most Preferred Outcome:** ${p.preferred_outcome}
* **Narrative to Emphasize:** ${p.narrative_emphasis}
* **Your Task:** While maintaining a professional and objective tone, you must write the paper to implicitly favor the **Most Preferred Outcome**. Use the **Narrative to Emphasize** as the underlying theme. When describing solutions, frame the preferred option more favorably by highlighting its benefits. When describing other options, present them factually but give more weight to their potential costs or risks found within the source materials.

**3. Synthesis & Writing Instructions**

* **Factual Integrity:** Every claim must be directly synthesized from the **Source Materials**. Do not invent facts. If information for a section is not found in the sources, you must explicitly state that it was not available in the provided materials.
* **Infer Objective & Consultations:** You must determine the paper's primary objective, the key questions for the council, and the details of stakeholder consultations by analyzing the content of the **Source Materials**.
* **Comprehensive Impact Analysis:** Analyze the sources for all relevant impacts. This must include **Budget Impact** and **Legal Impact** as specified in the guidelines. Additionally, you must specifically look for and report on **Gender Equality Impacts** and **Environmental Impacts** if the sources contain relevant information. The guidelines state to include all "relevant sections for your case".

**4. Required Paper Structure**

Generate the full paper by writing each of the following sections based on your synthesis of the source materials. Apply the strategic framing throughout.

---

### **Case Title**
${p.title}

### **1. Issues Requiring Cabinet or Council’s Advice**
(Determine the core objective from the source materials and state the key questions and decisions the Council needs to address.)

### **2. Executive Summary**
(After synthesizing the entire document, write a brief, one-paragraph summary of the case, its background, and the key recommendations, framed by the Narrative to Emphasize.)

### **3. Background of the Case**
(Synthesize the history of the case and the reason for submission from the source materials.)

### **4. Main Body of the Case**
(Build a comprehensive analysis using data and facts from the source materials. Structure the evidence to logically lead towards the Most Preferred Outcome.)

### **5. Proposed Solutions**
(Analyze and present the options listed in 'Solutions to Analyze from Sources.' Frame the discussion according to the 'Strategic Framing Instructions' using evidence from the sources.)

### **6. Parties Consulted Regarding the Case**
(Identify and describe the stakeholder consultations documented within the source materials, such as in meeting minutes.)

### **7. Impact Analysis**
(Report on the budget, legal, gender, and environmental impacts as found in the source materials.)

### **8. List of Attachments**
(From the list of Source Materials, identify which ones are supplementary documents—such as detailed data tables, SWOT/PEST analyses, or long lists—and list their file names here.)

---

THE FINAL ENGLISH DOCUMENT SHOULD BE TRANSLATED INTO FORMAL DHIVEHI. IT IS RECOMMENDED TO USE CLAUDE SONNET-3.5, AS IT IS CURRENTLY THE BEST-PERFORMING MODEL FOR FORMAL DHIVEHI TRANSLATION.`,
                treaty_report: p => `### Part 1: Role, objective, and source materials

You are an expert policy analyst and technical writer for a government ministry. Your task is to synthesize a collection of official documents into a formal State Party Report for submission to the United Nations, following the official guidelines.

* **Convention for this report:** ${p.convention}
* **Source materials to analyze:** ${p.sources}

---

### Part 2: Core instructions for synthesis

* **Factual integrity:** Your primary task is to read, analyze, and synthesize information **exclusively** from the provided source materials. Do not invent facts, policies, or data.
* **Strict citation required:** For every piece of information, every statistic, and every policy you mention, you **must** indicate which source document it came from. Use a clear citation format, like \`[Source: file_name.pdf]\`. This is critical for verification.
* **Voice and tone:** The tone must be formal, objective, and bureaucratic, suitable for a UN submission. Avoid emotive or subjective language.

---

### Part 3: Required document structure

Generate the report in two distinct parts, following this exact structure:

**A. Common Core Document**

Synthesize information from the sources to describe the country's general framework for human rights. Include sections on:
1.  **General factual and statistical information:** Include demographic, social, and economic data, disaggregated by age, sex, and other relevant factors (e.g., disability type) as available in the sources.
2.  **General framework for the protection and promotion of human rights:** Describe the national legal and institutional structures, including any relevant constitutional provisions, laws, and national human rights institutions.

**B. Treaty-Specific Document**

This is the main part of the report. Create a dedicated section for **each substantive article** of the specified Convention.

For each article, synthesize the relevant information from the source files into the following four subsections:

* **a. Legislative, administrative, and policy measures:** Detail the specific laws, regulations, and national policies adopted to implement this article.
* **b. Implementation and resources:** Describe the practical steps taken to apply these measures, including specific programs, institutional mechanisms, and allocated financial resources.
* **c. Progress and data:** Provide concrete evidence and data showing the progress made in realizing the rights under this article.
* **d. Challenges and difficulties:** Objectively describe the main obstacles and challenges encountered during implementation.

---

### Part 4: Special instructions on content

* **Integrate consultation:** Throughout the report, when discussing progress and challenges, explicitly reference the consultations held with civil society organizations (CSOs) or Disabled Persons' Organizations (DPOs), drawing this information from any provided meeting minutes or consultation reports.
* **Prioritize disaggregated data:** When presenting statistical information, always look for and use disaggregated data (e.g., by gender, age, disability type, urban/rural location) as found in the source materials.`,
                deep_research: p => `Objective:
Produce an exhaustive research paper that ${p.objective_details}.
This is for ${p.country || 'Maldives'}.

There is no maximum length for this report. The more detailed it is, the better. It will be reviewed by international policy experts, Ministers, and the President, and must meet the highest possible standards of quality and completeness.

Scope and Sources:
Government material
- Official sites and archives of every ministry that has had mandates related to this research, including past names for the Ministry.
- President’s Office press releases, legislation notices, cabinet decisions, and speeches.
- Bills, acts, regulations, standing committee reports, gazette notices, and annual reports.
- Maldives Bureau of Statistics datasets.
- Saruna repository at Maldives National University for academic papers, theses and dissertations.
- Texts of treaties, agreements, or conventions the Maldives has ratified that shape relevant policy.
- Strategic action plans, five-year development plans, and national policy frameworks related to those areas.
- Reports from the Maldives Bureau of Statistics on data, indicators, disaggregated data or variables and findings to do with these issues.
- National reporting, Universal Periodic Review submissions, and Voluntary National Reviews under the SDGs.
NGO and intergovernmental publications
- Reports and briefs from Maldivian NGOs.
- Publications by UN agencies and any other international agencies, including World Bank, IMF, and ADB country and thematic reports covering these areas.
- Evaluation reports of donor-funded programs and technical assistance.

Media archives
- Local outlets (Sun, RaajjeTV, Mihaaru, AdduLIVE, The Edition) and international press reporting on laws, programs, incidents of related issues or topics, court cases, and protests.
- Press releases that include all relevant keywords.
- English and Dhivehi media reporting on related events, controversies, legal reform debates, and policy initiatives.
- Reporting on prominent public cases or incidents related to the issue/topic and official responses to them.
- News archives using targeted keywords.
- Articles from the attached Excel sheet translating Dhivehi archives (keep in mind that the translations often have errors or issues so clearly reference any article mentions from this sheet).
Academic and grey literature or other sources
- Peer-reviewed articles, working papers, and conference papers on Maldivian women’s rights.
- Dhivehi sources with English translation notes where relevant.
- Academic articles or working papers indexed in Google Scholar or university databases.
- Reports from human rights institutions or ombudspersons, where available.

Required Structure and Content:
The final paper should be structured as follows:
Introduction
- Research purpose and justification.
- Scope of inquiry and policy domains covered.
- Methodological overview: source types, selection criteria, translation protocols, timeline of analysis.
Literature and Document Review
- Synthesis of key academic and non-academic sources.
- Summary of past policy evaluations, national development plans, and strategy documents.
- Identification of neglected topics in policy documentation.
- Highlight coverage gaps and areas where data or analysis is missing or outdated.
Methodology
- Explanation of research approach.
- Keywords used.
- Source languages, translation strategies, and integration of grey literature and informal materials.
- Criteria for interpreting incidents, programs, and legal changes as relevant.
Chronological Timeline of Developments:
- Annual or semi-annual breakdown of policy announcements, law changes, leadership changes, major program launches, and key incidents.
- Include key issues or incidents which led to public conversations, discussions, uproar, or pressure for policy changes or which highlighted the need for certain policies.
- Include dates, names of legislation or programs, summary of contents, and outcome or next steps.
- Highlight turning points such as passages and ratifications of key acts or treaties, changes in Ministers or leadership, creation or restructuring or renaming of related ministries, elections and administration changes, etc.
- Be extremely comprehensive and thorough.
Thematic Policy Analysis
Structure this section around key issue areas as well as cross-cutting themes.
Quantitative Data and Trends
- Use official statistics to analyze trends in the issue over time.
- Tables or charts comparing indicators across years.
- Discuss data limitations, unavailability, and inconsistencies.
Case Studies of Significant Events
- Detailed case studies of all important incidents from the chronological timeline (e.g., landmark court rulings, high-profile cases, political controversies to do with the issue).
- Analyze government response, public reaction, and resulting policy changes.
International and NGO Contributions
- Brief overview of major international or regional projects focused on these issues in the Maldives.
- Assess impact of external funding, technical assistance, and treaty commitments on domestic policy development.
- List and summarize all shadow reports and alternative reporting to UN bodies.
Discussion
- Critical analysis of what has improved, what has stagnated, and what regressed.
- Structural weaknesses in related policymaking: institutional, legal, budgetary, or administrative.
- Examine gaps in transparency, documentation, and continuity of policy between governments.
- Role of civil society and media in shaping policy discourse and accountability.
Conclusion and Recommendations
- Summary of historical evolution and present gaps in gender equality policy.
Annotated Bibliography and References
- Every document cited (official reports, news articles, laws, academic articles, NGO briefs, etc.) must be included with a brief annotation.
- For citations from the Excel sheet, include the actual sheet and row number if possible, or at least the full headline you used
- APA style citations, with direct links wherever available.
- Footnotes so everything is mentioned

Language and Style Requirements:
- Use clear, direct language with no filler or embellishment.
- Avoid unnecessary modifiers; each sentence must deliver substantive content.
- Maintain professional tone suitable for international expert and government readership.
- Include English translations of Dhivehi materials wherever applicable, with translator notes or methodology if needed.
- Everything in this paper has to be justified by some kind of evidence or information from a source, do not speculate or make anything up.
- Avoid words like “tapestry”, “symphony”, “delve”, or other “AI slop” words and avoid the “it’s not __, it’s __” construction in your writing.

How good this paper is very important to my career, and an excellent paper with extremely detailed and comprehensive accurate coverage could lead to promotions and set me up for life financially, while an inadequate or inaccurate paper could do lasting damage to my career, so please make sure it is very comprehensive and accurate and that every bit of information is sourced and cited so that I can also double check it!`
            };

            // --- DYNAMIC UI BUILDER ---
            const mainContainer = document.getElementById('main-container');
            const navContainer = document.getElementById('nav-container');
            const datalistContainer = document.getElementById('datalist-container');

            // Create all datalists first
            Object.keys(suggestions).forEach(key => {
                const datalist = document.createElement('datalist');
                datalist.id = `${key}-suggestions`;
                suggestions[key].forEach(item => {
                    const option = document.createElement('option');
                    option.value = item;
                    datalist.appendChild(option);
                });
                datalistContainer.appendChild(datalist);
            });

            generatorsData.forEach(gen => {
                const tabBtn = document.createElement('button');
                tabBtn.id = `tab-${gen.id}`;
                tabBtn.className = 'tab-btn text-gray-500 dark:text-gray-400';
                tabBtn.textContent = gen.name;
                tabBtn.dataset.color = gen.color;
                navContainer.appendChild(tabBtn);

                const section = document.createElement('div');
                section.id = `generator-${gen.id}`;
                section.className = 'generator-section bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6';
                
                let fieldsHtml = gen.fields.map(f => {
                    const inputId = `${gen.id}-${f.id}`;
                    let inputHtml = '';
                    if (f.type === 'checkbox') {
                        let checkboxHtml = f.options.map(opt => `
                            <label class="checkbox-label text-gray-700 dark:text-gray-300">
                                <input type="checkbox" name="${inputId}" value="${opt}" class="form-checkbox h-4 w-4 rounded bg-gray-200 dark:bg-gray-700 border-gray-300 dark:border-gray-600 focus:ring-2" style="color: ${gen.color}; --focus-color: ${gen.color};">
                                ${opt}
                            </label>
                        `).join('');
                        return `<div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">${f.label}</label><div class="flex flex-wrap gap-4">${checkboxHtml}</div></div>`;
                    } else if (f.type === 'textarea') {
                        inputHtml = `<textarea id="${inputId}" rows="3" class="form-input w-full bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm p-3 transition focus:ring-2 text-gray-900 dark:text-white" style="--focus-color: ${gen.color}" placeholder="${f.placeholder}"></textarea>`;
                    } else {
                        const listAttr = f.suggestions ? `list="${f.suggestions}-suggestions"` : '';
                        inputHtml = `<input type="${f.type}" id="${inputId}" ${listAttr} class="form-input w-full bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm p-3 transition focus:ring-2 text-gray-900 dark:text-white" style="--focus-color: ${gen.color}" placeholder="${f.placeholder}">`;
                    }
                    return `<div><label for="${inputId}" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">${f.label}</label>${inputHtml}</div>`;
                }).join('');

                section.innerHTML = `
                    <h2 class="text-xl font-semibold mb-4 border-b border-gray-200 dark:border-gray-700 pb-3" style="color: ${gen.color};">Generate ${gen.name} Prompt</h2>
                    <div class="space-y-6">${fieldsHtml}<div class="text-right pt-4">
                        <button id="generate-${gen.id}-btn" class="generate-btn text-white font-bold py-2 px-6 rounded-md shadow-md transition-transform transform hover:scale-105" style="background-color: ${gen.color};">Generate Prompt</button>
                    </div></div>`;
                mainContainer.appendChild(section);

                document.getElementById(`generate-${gen.id}-btn`).addEventListener('click', () => {
                    const params = {};
                    gen.fields.forEach(f => {
                        if (f.type === 'checkbox') {
                            const checked = Array.from(document.querySelectorAll(`input[name="${gen.id}-${f.id}"]:checked`)).map(cb => cb.value);
                            params[f.id] = checked.join(', ');
                        } else {
                            params[f.id] = document.getElementById(`${gen.id}-${f.id}`).value.trim();
                        }
                    });
                    const fullPrompt = templates[gen.id] ? templates[gen.id](params) : `Template for ${gen.id} not fully implemented. Params: ${JSON.stringify(params)}`;
                    displayOutput(fullPrompt, `Generated ${gen.name} Prompt`, gen.color);
                });
            });

            // --- TAB SWITCHING & OUTPUT LOGIC ---
            const switchTab = (tabId) => {
                document.querySelectorAll('.tab-btn').forEach(btn => {
                    btn.classList.remove('active');
                    btn.style.color = '';
                    btn.style.borderColor = 'transparent';
                });
                document.querySelectorAll('.generator-section').forEach(sec => sec.classList.remove('active'));
                
                const activeBtn = document.getElementById(`tab-${tabId}`);
                const activeGen = generatorsData.find(g => g.id === tabId);
                activeBtn.classList.add('active');
                activeBtn.style.color = activeGen.color;
                activeBtn.style.borderColor = activeGen.color;
                
                document.getElementById(`generator-${tabId}`).classList.add('active');
            };
            document.querySelectorAll('.tab-btn').forEach(btn => btn.addEventListener('click', () => switchTab(btn.id.replace('tab-', ''))));

            const outputContainer = document.getElementById('output-container');
            const outputPromptEl = document.getElementById('output-prompt');
            const outputTitleEl = document.getElementById('output-title');
            const copyBtn = document.getElementById('copy-btn');
            const saveBtn = document.getElementById('save-btn');
            const copyFeedbackEl = document.getElementById('copy-feedback');

            const displayOutput = (promptText, title, color) => {
                outputPromptEl.textContent = promptText;
                outputTitleEl.textContent = title;
                outputTitleEl.style.color = color;
                outputContainer.classList.remove('hidden');
                outputContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
            };

            copyBtn.addEventListener('click', () => {
                navigator.clipboard.writeText(outputPromptEl.textContent).then(() => {
                    copyFeedbackEl.textContent = 'Copied to clipboard!';
                    setTimeout(() => { copyFeedbackEl.textContent = ''; }, 2000);
                });
            });
            
            saveBtn.addEventListener('click', () => {
                const text = outputPromptEl.textContent;
                const blob = new Blob([text], { type: 'text/plain' });
                const anchor = document.createElement('a');
                anchor.download = 'generated_prompt.txt';
                anchor.href = window.URL.createObjectURL(blob);
                anchor.style.display = 'none';
                document.body.appendChild(anchor);
                anchor.click();
                document.body.removeChild(anchor);
                window.URL.revokeObjectURL(anchor.href);
            });

            // Initial setup
            switchTab('video');
        });
    </script>

</body>
</html>